# [【Linux】ダミーファイルを任意のサイズで作成する](https://tsuredurediary.com/archives/linux-dummy-file.html)
# [Linuxでダミーファイルを作る4つの方法](https://www.410gone.click/blog/dummyfiles/)

# Linuxでダミーファイル作成

1. 中身が全て「0」で埋め尽くされている(ゼロデータ)
1. 中身がランダムな数字列や文字列となっている(ランダムデータ)

## ゼロデータのダミーファイルを作成する

ゼロデータのダミーファイルに関しても、2パターンに分けられます。<br>

1. ディスク上のブロックとしてだけ確保する
1. ディスクに実際に書き込んで確保する

### ディスク上のブロックとしてだけ確保する
fallocateコマンドで任意のサイズでダミーファイルの作成が可能です。<br>
以下のように実行してください。<br>
```
fallocate -l [サイズ] [ファイル名]
```
[ファイル名]と[サイズ]には任意のものを指定してください。サイズの単位はバイトになります。<br>
コマンド例)1MByteのファイルを作成<br>
```
fallocate -l 1048576 testfile
```

コマンド例)1GByteのファイルを作成<br>
```
fallocate -l 1073741824 testfile
```

### ディスクに書き込んで確保する
ディスクの読み出し等に使用するのであれば、ddコマンドを使用することをおすすめします。<br>
```
dd if=/dev/zero of=[ファイル名] bs=[ブロックサイズ] count=[個数]
```

[ファイル名]、[ブロックサイズ]、[個数]には任意のものを指定してください。オプションの意味は以下のようになります。<br>

- bs=[ブロックサイズ] : 1度に[ブロックサイズ]バイトずつ読み込みと書き出しを実行する
- count=[個数] : [個数]回読み込みと書き出しを実行する

また、[ブロックサイズ]には以下のような単位が使用できます。<br>

- K=1024
- M=1024*1024
- G=1024*1024*1024
- KB=1000
- MB=1000*1000
- GB=1000*1000*1000

コマンド例)1MByteのファイルを作成<br>
```
dd if=/dev/zero of=testfile bs=1M count=1
```

コマンド例)1GByteのファイルを作成<br>
```
dd if=/dev/zero of=testfile bs=1M count=1024
```
ゼロデータは、圧縮処理が入るととても小さなファイルとなってしまうため誤った結果になることがあるので注意してください。<br>

## ランダムデータのダミーファイルを作成する

ランダムデータのダミーファイルに関しても、2パターンに分けられます。<br>

1. テキストデータ
1. バイナリデータ

### テキストのランダムデータのダミーファイルを作成する

テキストのランダムデータを作成したい場合はbase64コマンドを利用します。<br>
```
base64 /dev/urandom | head -c [サイズ] > [ファイル名]
```

サイズには以下のような単位が使用できます。<br>

- b=512
- K=1024
- M=1024*1024
- KB=1000
- MB=1000*1000

コマンド例)1MByteのファイルを作成<br>
```
base64 /dev/urandom | head -c 1M > testfile
```

コマンド例)1GByteのファイルを作成<br>
```
base64 /dev/urandom | head -c 1024M > testfile
```

### バイナリのランダムデータのダミーファイルを作成する

バイナリのランダムデータのダミーファイルの作成には、ddコマンドを使用します。ゼロデータとの違いはオプションが「if=/dev/zero」なのか「if=/dev/urandom」かの違いです。<br>
```
dd if=/dev/urandom of=[ファイル名] bs=[ブロックサイズ] count=[個数]
```

[ファイル名]、[ブロックサイズ]、[個数]には任意のものを指定してください。ゼロデータのところでも記載していますが、オプションの意味は以下のようになります。<br>

- bs=[ブロックサイズ] : 1度に[ブロックサイズ]バイトずつ読み込みと書き出しを実行する
- count=[個数] : [個数]回読み込みと書き出しを実行する

コマンド例)1MByteのファイルを作成<br>
```
dd if=/dev/urandom of=testfile bs=1M count=1
```

コマンド例)1GByteのファイルを作成<br>
```
dd if=/dev/urandom of=testfile bs=1M count=1024
```

# 大量のダミーファイルを作成する方法
ループ処理と組み合わせることで簡単に大量のダミーファイルを作成することが可能です。<br>
Linuxのループ処理は以下のように書くことができます。<br>

```
for [変数] in {[開始する数]..[終了する数]}; do [処理内容]; done
```

コマンド例)1MByteのゼロデータのファイルを1024個(1GByte分)作成<br>
```
for i in {1..1024}; do fallocate -l 1048576 testfile${i}; done
```

コマンド例)1GByteのバイナリのランダムファイルを100個(100GByte分)作成<br>
```
for i in {1..100}; do dd if=/dev/urandom of=testfile${i} bs=1M count=1024 ; done
```

作成されるファイルをそれぞれ別ファイルにするため、ファイル名に「${1}」をつけ忘れないようにしてください。<br>
