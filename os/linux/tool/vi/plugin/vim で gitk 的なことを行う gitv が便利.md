[vim で gitk 的なことを行う gitv が便利](http://cohama.hateblo.jp/entry/20120417/1334679297)<br/>

## インストール
[gregsexton/gitv](http://cohama.hateblo.jp/entry/20120417/1334679297)<br/>

## 使い方
コマンドモードで<br/>
<pre>
:Gitv
</pre>

と打てばブラウザモード（後述）で起動します。<br/>
gitk --all 相当のことは<br/>

<pre>
:Gitv --all
</pre>

でいけます。<br/>
また、<br/>

<pre>
:Gitv!
</pre>

のように ! をつけるとファイルモード（後述）で起動します。<br/>

## ブラウザモード
左のウィンドウにコミットのグラフ、右のウィンドウにコミットメッセージとそのコミットでの変更点が表示されます。<br/>
j や k でグラフ上を移動でき、<CR> でそのコミットの情報が見れます。<br/>
![](http://cdn-ak.f.st-hatena.com/images/fotolife/c/cohama/20120418/20120418000325.png)<br/>

## ファイルモード

ファイルモードは１つのファイルの履歴を追うモードです。<br/>
:Gitv! コマンドを叩いた時に開いていたファイルの履歴をたどります。<br/>
上にコミットのログ、下にコミット時のファイルの状態が表示されます。<br/>
![](http://cdn-ak.f.st-hatena.com/images/fotolife/c/cohama/20120418/20120418010128.png)<br/>

## キーバインド

|キー|ブラウザモード|ファイルモード|
|:-- |:-- |:--|
|&lt;CR&gt;|選択したコミットの情報を開く|選択したコミット時におけるファイルを表示|
|o|水平にウィンドウを分割してコミットの情報を開く|水平にウィンドウを分割してファイルを表示|
|O|新しいタブでコミットの情報を開く|新しいタブでファイルを表示|
|s|垂直にウィンドウを分割して(ry|垂直にウィンドウを分割して(ry|
|i|<CR>と同じ|コミット情報の表示|
|q|gitv の終了|gitv の終了|
|u|最新の情報に更新|最新の情報に更新|
|co|ブランチやコミットをチェックアウト（HEAD が移動）|ファイルをチェックアウト（HEADは移動しない）|
|D|なにもなし|表示されているファイルと選択されたファイルの差分を vim の diff で見る|
|S|diff --stat の表示|diff --stat の表示|
|ビジュアルモードで複数のコミットをハイライトした状態で D|なにもなし|ハイライトされている一番上のコミットと一番下のコミットの差分を vim の diff で見る|
|ビジュアルモードで複数のコミットをハイライトした状態で S|一番上のコミットと一番下のコミットの diff --stat|一番上のコミットと一番下のコミットの diff --stat|
|ビジュアルモードで複数のコミットをハイライトした状態で m|一番上のブランチと一番下のブランチをマージする（上と下が必ずブランチやタグでなければならない）|（たぶん）なにもなし|

## 不具合・・・？
ひとによるのかもしれませんが、私の環境ではブラウザモードで開いた時に diff が折りたたまれて表示されてしまいました。<br/>
以下のようにやれば直るようです。<br/>
<pre>
autocmd FileType git :setlocal foldlevel=99
</pre>

## 参考
<pre>
:help gitv
</pre>
